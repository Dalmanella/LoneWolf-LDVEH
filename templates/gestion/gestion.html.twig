{% extends 'base.html.twig' %}

{% block title %}LoneWolf gestion{% endblock %}

{% block header %}
    {{ include('entete/_entetemenu.html.twig') }}    
{% endblock %}

{% block body %}

<h2 class="mt-3 mb-3 "> base de données des combats </h2>
<a class="d-flex text-decoration-none mt-2 justify-content-center mb-5  mx-4" href="{{ path('clearTable') }}">
            <div class="">
                <img class="img-fluid icone" src="{{ asset ('assets/img/ico-skullTrash.png') }}" />
                <p class="display-6">RAZ table des combats</p>
            </div>
            
</a>
<h2 class="mt-3 mb-3 "> tableau des users </h2>
<div class="container-lg mt-1 d-flex justify-content-center">
    <table class="table table-striped ">
      <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">pseudo</th>
           
            <th scope="col">Rôle</th>
            <th scope="col">Actions</th>
              
        </tr>
      </thead>
      <tbody> 

        {% for user in utilisateurs %}
            {% set userId = user.id %}
            {% set agir = 'voir' ~ userId %}
        <tr>
          <th scope="row">{{userId}}</th>
          <td>{{user.pseudo}}</td>
          
          <td>{{user.roles[0]}}</td>
          <td>
                <!-- Bouton lance popup -->
                <button type="button" id="ico-map" class="btn-disciplines" data-bs-toggle="modal" data-bs-target="#{{agir}}">
                    <img 
                    class="me-3 img-fluid ico-map" 
                    src="{{ asset ('assets/img/ico-openbook.png') }}" /> 
                </button>

                <!-- popup de la map en fullscreen -->
                <div class="modal fade" id="{{agir}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="{{agir}}Label" aria-hidden="true">
                    <div class="modal-dialog modal-fullscreen ">
                        <div class="modal-content  ">
                            <div class="modal-header justify-content-between">
                                <h2 class="modal-title" id="{{agir}}Label" style="font-family:'Dr Sugiyama', cursive;">user: {{userId}}</h2>
                                <button type="button" class="btn" data-bs-dismiss="modal" aria-label="Close">
                                    <img class="" style="width:36px;" src="{{ asset ('assets/img/cross-ico.png') }}" /> 
                                </button>
                            </div>
                            <div class="modal-body overflow-y">
                                {{user.pseudo}}</br>
                                {{user.email}}</br>
                                <div class="container overflow-auto">{{user.password}}</br></div>
                                 {% if user.roles[0] is not same as 'ROLE_ADMIN' %}
                                    {# Bouton-SUPPR  #}
                                        <a 
                                        class="btn-heroDelete"             
                                        href="{{ path( "userDel", {'userId':userId} ) }}" 
                                        >  
                                            <img 
                                                src="{{ asset ('assets/img/ico-skullTrash.png') }}" alt="trash - delete user" 
                                            />      
                                        </a>
                                {% endif %}
                                                                
                            </div>
                        </div>
                    </div>
                </div>
    
          </td>
        </tr>

        {% endfor %} 
    
    </tbody>
    </table>
</div>



{% endblock %}
{% block footer %}
        <div class="sticky-bottom">
            <img class="fleches mt-5" src="{{ asset ('assets/img/decoBas.png') }}" />
            </br></br>
{% endblock %}